:root {
    /* Define colors and sizes for easy changes */
    --background: #1c1c1e;
    --pad-bg: #464646;
    --pad-active-bg: #007bff;
    --pad-loaded-color: #f0f0f0;
    --gap: 15px;
}

html, body {
    height: 100%;
    margin: 0;
    overscroll-behavior: none; /* Prevents "pull-to-refresh" */
}

body {
    background-color: var(--background);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    /* Use dynamic viewport height to account for mobile browser bars */
    height: 100dvh;
}

.drum-machine {
    display: grid;
    width: 100%;
    height: 100%;
    box-sizing: border-box; /* Ensures padding is included in the element's total size */
    gap: var(--gap);
    
    /* --- SAFEZONE PADDING --- */
    /* This is the fix. It adds padding to respect the device's UI (like the home bar) */
    /* The values are 0 on browsers/devices that don't need them. */
    padding-top: max(var(--gap), env(safe-area-inset-top));
    padding-right: max(var(--gap), env(safe-area-inset-right));
    padding-bottom: max(var(--gap), env(safe-area-inset-bottom));
    padding-left: max(var(--gap), env(safe-area-inset-left));

    /* Default to a 2x4 grid for portrait mode */
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: repeat(4, 1fr);
}

/* --- Media query for landscape orientation --- */
@media (orientation: landscape) {
    .drum-machine {
        /* Switch to a 4x2 grid for landscape mode */
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(2, 1fr);
    }
}

.pad {
    background-color: var(--pad-bg);
    border-radius: 20px;
    cursor: pointer;
    transition: transform 0.07s ease, background-color 0.07s ease;
    -webkit-tap-highlight-color: transparent; /* Remove tap flash on mobile */
    aspect-ratio: 1 / 1; /* Makes the pad a perfect square */
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2.5em;
    color: var(--pad-loaded-color);
}

.pad.active {
    transform: scale(0.92);
    background-color: var(--pad-active-bg);
}